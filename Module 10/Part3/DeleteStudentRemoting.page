<apex:page controller="DeleteStudentRemotingController">
    <head>
        <script src="../../soap/ajax/42.0/connection.js" type="text/javascript"></script>
        <script>
            var urlParams = new URLSearchParams(window.location.search);
        	var records = urlParams.get('recs');
            var retURL = urlParams.get('retURL');
        Visualforce.remoting.timeout = 120000;
        function continueStudent(){ 
            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.DeleteStudentRemotingController.deleteStudents}', 
                records,
                handleResult
            );
            window.close();
            window.opener.location.href = retURL;
        }
        function handleResult(result, event){
            if (event.statusCode == 200) {
                alert('Delete Succesfully');
            } 
            else {
                alert('Not Succesfully');
            } 
        }
        function cancelStudent(){
            window.opener.location.href = retURL;
            window.close();
        }    
        </script>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Delete Students</title>
        <apex:slds />
    </head>
    <body>
        <apex:form >
            <apex:commandButton value="Continue" onclick="continueStudent();" />
            <apex:commandButton value="Cancel" onclick="return cancelStudent();" />
        </apex:form>
    </body>
</apex:page>