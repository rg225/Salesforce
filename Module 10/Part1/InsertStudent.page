<apex:page sidebar="false" showHeader="false">
    <head>
        <script src="/soap/ajax/42.0/connection.js" type="text/javascript"></script>
        <script type = "text/javascript">
            var urlParams = new URLSearchParams(window.location.search);
            function createStudentRecord() {
                sforce.connection.sessionId = '{!$Api.Session_ID}';
                var lastName = document.getElementById('StudentName').value;
                var student = new sforce.SObject('Student__c');
                student.LastName__c = lastName;
                student.Name = lastName;
                student.class__c = urlParams.get('id');
                var retURL = urlParams.get('retURL');
                var result = sforce.connection.create([student]);
                if (result[0].getBoolean("success")) {
                    alert("Student created with id : " + result[0].id);
                    window.close();
                    window.opener.location.href = retURL;
                } 
                else {
                    alert("failed to create Student " + result[0]);
                }
            }
        </script>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Add Students</title>
        <apex:slds />
    </head>
    <body>
        <apex:form >
            <apex:pageBlock title="Create New Student Record" id="recordBlock">
                <apex:pageMessages ></apex:pageMessages>
                <input type="text" id="StudentName" required="true"/> 
                <apex:commandButton value="Insert Student" onclick="createStudentRecord()" />
            </apex:pageBlock>
        </apex:form>
    </body>
</apex:page>